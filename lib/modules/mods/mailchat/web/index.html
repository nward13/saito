<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Saito Email</title>

  <script type="text/javascript" src="/jquery/jquery-3.2.1.min.js"></script>
  <link rel="stylesheet" href="/jquery/jquery-ui.min.css" type="text/css" media="screen" />
  <script type="text/javascript" src="/jquery/jquery-ui.min.js"></script>

  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css" type="text/css" media="screen" />

  <link rel="stylesheet" type="text/css" href="/chat/style.css" />
  <link rel="stylesheet" type="text/css" href="/combo/style.css" />

</head>

<body>

  <div id="Email_browser_active"></div>


  <!-- <div class="email-container"> -->
  <div class="header">
    <a href="/" class="logo_link">
      <img src="/img/saito_logo_black.png" class="logo" />
      <div id="saitoname" class="logo_text">saito mail</div>
    </a>
  </div>


  <div class="loader">
    Saito is currently loading....
    <p></p>
    We are downloading the application itself into your browser from our server in Los Angeles. The download is reasonably fast in the United States, but can take up to a minute in China due to its size (~1.6 MB). Please be patient.
  </div>

  <div class="main" style="display:none">

    <div class="sidebar">
      <div class="compose" id="compose">COMPOSE</div>
      <div class="mailboxes" id="mailboxes">
        <div id="mailbox_inbox" class="mailbox active">Inbox</div>
        <div id="mailbox_sent" class="mailbox">Sent</div>
      </div>
    </div>



    <div class="mail-header">
      <div class="mail-controls">

        <div class="mail-controls-back mail-controls-btn" id="mail-controls-back"><i class="fa fa-arrow-left returnButton"></i></div>

        <div class="mail-module-label" id="mail-module-label">Settings Module</div>

	<div class="settings-wrapper">
          <div class="mail-controls-settings mail-controls-btn" id="mail-controls-settings"><i class="fa fa-cog"></i></div>
	</div>
        <div id="primary_nav_wrap" class="mail-controls-apps mail-controls-btn">
          <ul>
            <li><a href="#"><div id="mail-controls-apps"><i class="fa fa-bars" aria-hidden="true"></i></div></a>
              <ul class="mail-controls-apps-menu">
              </ul>
            </li>
          </ul>
        </div>

        <div class="mail-controls-delete mail-controls-btn" id="mail-controls-delete"><i class="fa fa-trash-o"></i></div>
      </div>
      <div id="mail-alertbox" class="mail-alertbox"></div>
      <div class="mail-balance">
        <div class="balance" id="balance">SAITO</div>
        <div class="balance-money" id="balance-money">0</div>
      </div>
    </div>

    <div class="mail">
      <div class="message" id="message" style="display:none"></div>
      <table class="message-table" id="message-table"></table>
    </div>

  </div>

  <div class="mail_chat_popup" style="display:none">

    <div id="Chat_browser_active"></div>
    <div id="chat_container">

      <section id="chat_header">
        <div style="display:flex; flex-direction: row;width: 207px;">
          <img id="chat_saitoLogo" src="/img/saito_logo_black.png" />
          <div id="chat_saitoText" style="font-family:Georgia;padding-top:5px;color:#444;">chat</div>
        </div>
        <select class="chat_chat-room-selector">
        </select>
      </section>

      <div id="chat_main" class="chat_chat_main">
        <section id="chat_messages-list">Messages:</section>
        <section id="chat_messages-list">
          <ul class="chat_messages-list" id="All">
            <p id="chat_message_id_0" class="chat_message"><i>BearGuy</i>: Welcome to Saito!</p>
          </ul>
        </section>
      </div>

      <section id="chat_new-message">
        <input class="chat_new-message-input" id="chat_new-message-input"></input>
      </section>

    </div>
  </div>

  <style class="text/css">
    #chat_saitoLogo {
      display:none;
    }
    #chat_saitoText {
      padding-left: 5px;
    }
    .mail_chat_popup {
      position: absolute;
      right: 400px;
      bottom: 500px;
    }
    #chat_main {
      height:420px;
    }
    #chat_container {
      max-width: 400px;
      background-color: white;
      border: 1px solid #a5a5a5;
    }

    @media only screen and (max-width: 535px) {
      .mail_chat_popup {
        width:100%;
	right: 0px;
      }
      #chat_container {
        max-width:100%;
        border: 0px;
	border-top: 1px solid #a5a5a5
      }
    }

  </style>
  <script type="text/javascript">

    var chat_container_height = 500;
    var chat_messages = $("#All > p").length;

    var chat_check_timer = setInterval(function() { 
      let tmpcm = $("#All > p").length;
      if (tmpcm > chat_messages) {
	chat_messages = tmpcm;
	if (chat_container_height == 40) {
	  $('#chat_header').css('background-color','#9deca1');
	  $('#chat_saitoText').css('color', '#444');
	}
      }
    }, 3000);


    $('#chat_header').off();
    $('#chat_header').on('click', function(e) {

      // check we are not chat-selector
      if ($(e.target).is(".chat_chat-room-selector")) {
        return;
      }

      // otherwise toggle divs
      if (chat_container_height == 500) {
        $('.mail_chat_popup').css('bottom','40px');
	$('#chat_new-message').css('display','none');
	$('.chat_chat-room-selector').css('display','none');
	$('#chat_header').css('background-color','#fff');
	$('#chat_saitoText').css('color','#a5a5a5');
        chat_container_height = 40;
      } else {
        $('.mail_chat_popup').css('bottom','500px');
	$('#chat_new-message').css('display','block');
	$('.chat_chat-room-selector').css('display','block');
	$('#chat_header').css('background-color','#fff');
	$('#chat_saitoText').css('color','#444');
        chat_container_height = 500;
      }
    });
  </script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/browser.js"></script>
  <script src="/combo/script.js"></script>

</body>

</html>
